<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hero24 Version 4: Interactive Strategy Report (with Gemini API)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Professional Harmony -->
    <!-- Application Structure Plan: A top-level tabbed navigation SPA. Sections: 'Vision & KPIs', 'The Platform (Buyer/Seller View)', 'Competitive Edge', and 'Roadmap & Tech'. This structure breaks the dense report into logical, user-centric themes. The 'Platform' section uses a sub-toggle for Buyer/Seller, directly addressing the report's primary user division. This non-linear, thematic approach is chosen over a chapter-by-chapter mirror to allow users to quickly access topics of interest (e.g., a competitor analyst can jump straight to 'Competitive Edge') enhancing usability and information discovery. -->
    <!-- Visualization & Content Choices: KPIs -> Goal: Inform -> Viz: Animated Bar Charts (Chart.js) -> Interaction: Hover for details -> Justification: Visually engaging way to present key metrics. Competitive Matrix -> Goal: Compare -> Viz: Interactive HTML/Tailwind Grid -> Interaction: Click/Hover to highlight rows/columns -> Justification: Allows easy comparison across multiple vectors. Phased Roadmap -> Goal: Show Change -> Viz: HTML/CSS Timeline -> Interaction: Click to expand phase details -> Justification: Clearly illustrates the project's progression over time. User Personas -> Goal: Organize/Inform -> Viz: Interactive Cards -> Interaction: Toggle between Buyer/Seller, Click card to see details -> Justification: Organizes user information logically and interactively. CONFIRMED: NO SVG, NO Mermaid. All visuals are HTML/CSS or Canvas via Chart.js. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Inter', sans-serif; scroll-behavior: smooth; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .nav-link { transition: all 0.3s ease; }
        .nav-link.active { color: #ea4435; border-bottom-color: #ea4435; }
        .kpi-card { transition: all 0.3s ease; }
        .kpi-card:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); }
        .feature-card { transition: all 0.3s ease; }
        .feature-card:hover { border-color: #ea4435; }
        .competitor-table th, .competitor-table td { transition: background-color: 0.3s ease; }
        .timeline-item::before { content: ''; position: absolute; left: -2.375rem; top: 0; width: 1.25rem; height: 1.25rem; background-color: #f5f5f4; border: 4px solid #ea4435; border-radius: 9999px; z-index: 10; }
        .timeline-line { position: absolute; left: -1.875rem; top: 0; bottom: 0; width: 2px; background-color: #d6d3d1; }
        .chart-container { position: relative; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; height: 300px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { height: 350px; } }
        [x-cloak] { display: none !important; }
        .gemini-modal-backdrop { background-color: rgba(0, 0, 0, 0.5); }
        .gemini-modal-content h1 { font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem; }
        .gemini-modal-content h2 { font-size: 1.25rem; font-weight: bold; margin-bottom: 0.75rem; margin-top: 1.25rem; }
        .gemini-modal-content ul { list-style-type: disc; margin-left: 1.5rem; margin-bottom: 1rem; }
        .gemini-modal-content p { margin-bottom: 0.75rem; }
        .gemini-modal-content strong { font-weight: 600; }
        .loader { border-top-color: #ea4435; }
    </style>
</head>
<body class="bg-stone-50 text-slate-800">

    <div id="app" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

        <header class="py-6">
            <div class="text-center">
                <h1 class="text-4xl font-bold text-slate-900">Hero24 Version 4</h1>
                <p class="mt-2 text-lg text-slate-600">Interactive Product & Strategy Specification</p>
            </div>
        </header>

        <nav class="sticky top-0 bg-stone-50/80 backdrop-blur-lg z-20 border-b border-stone-200 mb-8">
            <ul class="flex justify-center items-center space-x-4 sm:space-x-8 text-sm sm:text-base font-medium text-slate-600">
                <li><a href="#vision" data-tab="vision" class="nav-link block py-4 border-b-2 border-transparent hover:text-red-600">Vision & KPIs</a></li>
                <li><a href="#platform" data-tab="platform" class="nav-link block py-4 border-b-2 border-transparent hover:text-red-600">The Platform</a></li>
                <li><a href="#competitive" data-tab="competitive" class="nav-link block py-4 border-b-2 border-transparent hover:text-red-600">Competitive Edge</a></li>
                <li><a href="#roadmap" data-tab="roadmap" class="nav-link block py-4 border-b-2 border-transparent hover:text-red-600">Roadmap & Tech</a></li>
            </ul>
        </nav>

        <main>
            <div id="vision" class="tab-content">
                <section class="bg-white p-6 sm:p-8 rounded-xl shadow-sm">
                    <h2 class="text-2xl font-bold text-slate-900 mb-4">Strategic Vision</h2>
                    <p class="text-slate-600 leading-relaxed mb-4">This section outlines the core vision for Hero24 Version 4. The goal is to evolve the platform from a functional home services marketplace into an award-winning, intelligent, and trusted ecosystem. By enhancing the V3 foundation with advanced AI, unparalleled trust mechanisms, and holistic seller empowerment tools, V4 will deliver a product that not only meets but anticipates user needs, establishing Hero24 as a definitive market leader.</p>
                    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="border-l-4 border-red-500 p-4 bg-red-50 rounded-r-lg">
                            <h3 class="font-bold text-red-900">Intelligent Personalization</h3>
                            <p class="text-sm text-red-800 mt-1">Leverage AI for personalized recommendations and effortless booking.</p>
                        </div>
                        <div class="border-l-4 border-amber-500 p-4 bg-amber-50 rounded-r-lg">
                            <h3 class="font-bold text-amber-900">Unparalleled Trust</h3>
                            <p class="text-sm text-amber-800 mt-1">Implement a multi-layered trust framework with verification, escrow, and guarantees.</p>
                        </div>
                        <div class="border-l-4 border-sky-500 p-4 bg-sky-50 rounded-r-lg">
                            <h3 class="font-bold text-sky-900">Seller Empowerment</h3>
                            <p class="text-sm text-sky-800 mt-1">Provide sellers with advanced tools for analytics, procurement, and growth.</p>
                        </div>
                         <div class="border-l-4 border-violet-500 p-4 bg-violet-50 rounded-r-lg">
                            <h3 class="font-bold text-violet-900">Seamless Experience</h3>
                            <p class="text-sm text-violet-800 mt-1">Refine all user flows for intuitive design and reliability, including partial offline mode.</p>
                        </div>
                    </div>
                </section>
                
                <section class="mt-8">
                     <h2 class="text-2xl font-bold text-slate-900 mb-4 text-center">Key Performance Indicators</h2>
                     <p class="text-slate-600 leading-relaxed mb-8 text-center max-w-3xl mx-auto">To measure success, Version 4 will be evaluated against clear KPIs tied to our strategic pillars. These metrics provide a data-driven framework for tracking progress in trust, engagement, and growth. Interact with the charts below to see the targets.</p>
                    <div class="grid md:grid-cols-3 gap-8">
                        <div class="bg-white p-6 rounded-xl shadow-sm kpi-card">
                            <h3 class="font-semibold text-slate-900 text-center">Enhance Trust & Safety</h3>
                             <div class="chart-container h-64 sm:h-72"><canvas id="kpiChartTrust"></canvas></div>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-sm kpi-card">
                            <h3 class="font-semibold text-slate-900 text-center">Drive User Engagement</h3>
                             <div class="chart-container h-64 sm:h-72"><canvas id="kpiChartEngagement"></canvas></div>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-sm kpi-card">
                            <h3 class="font-semibold text-slate-900 text-center">Accelerate Growth</h3>
                            <div class="chart-container h-64 sm:h-72"><canvas id="kpiChartGrowth"></canvas></div>
                        </div>
                    </div>
                </section>
            </div>

            <div id="platform" class="tab-content" x-data="{ userType: 'buyer' }">
                <section class="bg-white p-6 sm:p-8 rounded-xl shadow-sm">
                    <h2 class="text-2xl font-bold text-slate-900 mb-2">The Platform Ecosystem</h2>
                    <p class="text-slate-600 leading-relaxed mb-6">Hero24 is a comprehensive ecosystem designed for two core user groups: Buyers seeking services and Sellers providing them. This section details the features tailored to each group. Use the toggle below to switch between the Buyer and Seller perspectives to explore the full range of functionalities planned for Version 4.</p>
                    
                    <div class="flex justify-center mb-8">
                        <div class="inline-flex rounded-lg shadow-sm bg-stone-100 p-1">
                            <button @click="userType = 'buyer'" :class="{'bg-white text-[#ea4435] shadow': userType === 'buyer', 'text-slate-500': userType !== 'buyer'}" class="px-4 py-2 text-sm font-semibold rounded-md transition-all">For Buyers</button>
                            <button @click="userType = 'seller'" :class="{'bg-white text-[#ea4435] shadow': userType === 'seller', 'text-slate-500': userType !== 'seller'}" class="px-4 py-2 text-sm font-semibold rounded-md transition-all">For Sellers</button>
                        </div>
                    </div>

                    <div x-show="userType === 'buyer'" x-cloak>
                        <div id="buyerFeatures" class="space-y-6"></div>
                    </div>
                    
                    <div x-show="userType === 'seller'" x-cloak>
                        <div id="sellerFeatures" class="space-y-6"></div>
                    </div>
                </section>
            </div>

            <div id="competitive" class="tab-content">
                 <section class="bg-white p-6 sm:p-8 rounded-xl shadow-sm">
                    <h2 class="text-2xl font-bold text-slate-900 mb-2">Competitive Edge</h2>
                    <p class="text-slate-600 leading-relaxed mb-8">Hero24 Version 4 is strategically positioned to lead the home services market. Our edge comes from a deep analysis of competitors and a focus on three core differentiators that address key user needs more effectively than any other platform. This section breaks down our competitive standing and unique value proposition.</p>
                    
                    <div class="grid lg:grid-cols-3 gap-8 mb-12">
                         <div class="p-6 bg-stone-100 rounded-lg text-center">
                            <div class="inline-block p-3 bg-red-100 text-red-600 rounded-full mb-3">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>
                            </div>
                            <h3 class="text-xl font-bold text-slate-900">The Unifying AI Engine</h3>
                            <p class="text-slate-600 mt-2">A core AI transforms the platform from a reactive directory into an intelligent, predictive partner for both buyers and sellers.</p>
                        </div>
                         <div class="p-6 bg-stone-100 rounded-lg text-center">
                             <div class="inline-block p-3 bg-amber-100 text-amber-600 rounded-full mb-3">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" /></svg>
                             </div>
                            <h3 class="text-xl font-bold text-slate-900">Unparalleled Trust & Safety</h3>
                            <p class="text-slate-600 mt-2">A multi-layered architecture including vetting, escrow, and guarantees creates the safest platform on the market.</p>
                        </div>
                        <div class="p-6 bg-stone-100 rounded-lg text-center">
                            <div class="inline-block p-3 bg-sky-100 text-sky-600 rounded-full mb-3">
                               <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" /></svg>
                            </div>
                            <h3 class="text-xl font-bold text-slate-900">Holistic Seller Empowerment</h3>
                            <p class="text-slate-600 mt-2">Viewing sellers as partners, we provide advanced business tools that foster loyalty and elevate service quality.</p>
                        </div>
                    </div>
                    
                    <h3 class="text-xl font-bold text-slate-900 mb-4">Competitive Feature Matrix</h3>
                    <div class="overflow-x-auto">
                        <table id="competitorTable" class="w-full text-sm text-left competitor-table">
                        </table>
                    </div>
                 </section>
            </div>

            <div id="roadmap" class="tab-content">
                <section class="bg-white p-6 sm:p-8 rounded-xl shadow-sm">
                    <h2 class="text-2xl font-bold text-slate-900 mb-2">Implementation Roadmap</h2>
                     <p class="text-slate-600 leading-relaxed mb-8">The development of Hero24 V4 will be managed through a phased implementation. This iterative approach ensures that the most critical features are delivered first, allowing for continuous feedback and adaptation. The roadmap is designed to build momentum, validate our strategy, and effectively allocate resources.</p>
                    <div class="relative pl-8">
                       <div class="timeline-line"></div>
                       <div id="roadmap-timeline" class="space-y-12">
                       </div>
                    </div>
                </section>
                
                <section class="mt-8">
                     <h2 class="text-2xl font-bold text-slate-900 mb-4 text-center">Technology & Architecture</h2>
                     <p class="text-slate-600 leading-relaxed mb-8 text-center max-w-3xl mx-auto">Version 4 is built on a modern, scalable, and agile technical foundation. Below are the key technologies and architectural principles that will power the platform's advanced capabilities and ensure long-term growth and stability.</p>
                    <div id="techStack" class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6">
                    </div>
                </section>
            </div>
        </main>

        <footer class="text-center py-8 mt-8 text-sm text-slate-500">
            <p>&copy; 2025 Hero24 Marketplace. All rights reserved.</p>
            <p>This is an interactive representation of the Version 4 product strategy.</p>
        </footer>

    </div>
    
    <div id="geminiModal" class="fixed inset-0 z-50 flex items-center justify-center p-4 gemini-modal-backdrop hidden" x-data="{ show: false, type: '' }" x-show="show" x-transition @close-modal.window="show = false">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[80vh] flex flex-col" @click.away="show = false">
            <div class="p-6 border-b border-gray-200">
                <h3 id="geminiModalTitle" class="text-xl font-bold text-slate-900">AI-Generated Content</h3>
            </div>
            <div id="geminiModalContent" class="p-6 overflow-y-auto flex-grow">
                <div class="flex justify-center items-center h-48">
                    <div class="loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12"></div>
                </div>
            </div>
            <div class="p-4 bg-gray-50 border-t border-gray-200 text-right">
                <button @click="show = false" class="px-4 py-2 bg-slate-200 text-slate-800 font-semibold rounded-lg hover:bg-slate-300">Close</button>
            </div>
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <script>
    const AppData = {
        kpis: {
            trust: [ { label: 'Dispute Reduction', value: 30, target: 30, unit: '%' }, { label: 'Avg. Seller Rating', value: 4.8, target: 5, unit: ' Stars' }, { label: 'Seller Verification', value: 75, target: 100, unit: '%' } ],
            engagement: [ { label: 'Repeat Buyer Rate', value: 25, target: 40, unit: '%' }, { label: 'Loyalty Adoption', value: 20, target: 30, unit: '%' }, { label: 'DAU Growth (YoY)', value: 40, target: 50, unit: '%' } ],
            growth: [ { label: 'Premium Conversion', value: 15, target: 25, unit: '%' }, { label: 'GMV Growth (YoY)', value: 50, target: 60, unit: '%' } ],
        },
        features: {
            buyer: [
                { title: "Onboarding & Profile", icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>', description: "Frictionless, secure, and efficient onboarding. New one-click sign-in via Google, Apple, and Facebook. Centralized profile hub for managing details, payments, addresses, and privacy settings, including account deletion." },
                { title: "Intelligent Search & Discovery", icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>', description: "AI-powered search with predictive suggestions and natural language understanding. Advanced filtering by price, rating, availability, and skills. Personalized home screen with proactive service recommendations." },
                { title: "Unified Booking & Quoting", icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" /></svg>', description: "Highly flexible engine with direct booking and RFQs. New 'Build Your Own Service' for custom projects, visual real-time price breakdowns, and support for video uploads to better explain job requirements.", gemini: { type: 'requestGenerator', label: 'Generate Detailed Request' } },
                { title: "Advanced Project Management", icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" /></svg>', description: "Centralized dashboard with real-time status updates and a new visual project timeline. Features in-app task checklists for transparency and allows for limited buyer-initiated edits to booked orders." },
                { title: "Communication & Community", icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" /></svg>', description: "Upgraded chat with voice notes, video calls, and instant translation. A new community hub with forums and a knowledge base to position Hero24 as a trusted resource, not just a transaction platform." },
                { title: "Secure & Flexible Payments", icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" /></svg>', description: "Support for mobile wallets (Apple/Google Pay). A cornerstone feature is the new Secure Escrow Service, holding payments until the job is approved. Advanced options like split and milestone payments for large projects." },
                { title: "Platform Credits & Wallet", icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z" /></svg>', description: "A streamlined refund process. Instead of cash returns, refunds from cancellations or disputes are issued as Hero24 Credits directly to your in-app wallet, ready to be used for discounts on any future service." },
                { title: "Virtual Gifts & Tipping", icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" /></svg>', description: "Show extra appreciation for exceptional service. After a job is completed, buyers can send virtual gifts or add a tip directly to the seller, fostering a positive community and rewarding top performers." },
                { title: "Referral & Loyalty Program", icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm0 2c-2.21 0-4 1.79-4 4v1h8v-1c0-2.21-1.79-4-4-4zm6 4h-2v-1c0-1.103-.897-2-2-2s-2 .897-2 2v1H8v-1c0-1.103-.897-2-2-2s-2 .897-2 2v1H2v-1c0-2.21 1.79-4 4-4h8c2.21 0 4 1.79 4 4v1z" /></svg>', description: "Earn rewards by sharing Hero24. Refer a new buyer and get a percentage discount on your next service after their first booking. Accumulate points for activity to unlock exclusive perks." }
            ],
            seller: [
                { title: "Onboarding & Verification", icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>', description: "Interactive setup wizard to guide sellers in creating compelling profiles. Rich digital portfolios with photos and videos. New 'Verified' badges for skills and insurance to build trust and command higher rates." },
                { title: "Service & Availability", icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>', description: "Advanced controls with two-way external calendar sync (Google/Outlook) to prevent double-bookings. Dynamic service area definition using map drawing or postal codes for precise lead targeting." },
                { title: "Intelligent Lead Management", icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>', description: "AI-powered engine proactively matches sellers with the most suitable leads based on skills, performance, and even route efficiency. Provides smart quote suggestions based on historical data to improve win rates.", gemini: { type: 'quoteGenerator', label: 'Draft Smart Quote' } },
                { title: "Performance & Financials", icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>', description: "Dashboard transformed into a business intelligence tool with advanced analytics (e.g., quote acceptance rate, earnings trends) and performance benchmarking against platform averages." },
                { title: "Tools for Growth", icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M12 14l9-5-9-5-9 5 9 5z" /><path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-5.998 12.078 12.078 0 01.665-6.479L12 14z" /><path stroke-linecap="round" stroke-linejoin="round" d="M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-5.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222 4 2.222V20" /></svg>', description: "New features that position Hero24 as a business partner. Includes integrated supply procurement at negotiated discounts and an in-app professional development hub with training and certification modules." },
                { title: "Ambassador Referral Program", icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm-1-4a1 1 0 100-2 1 1 0 000 2zm-1 1a1 1 0 100-2 1 1 0 000 2zM3 7a1 1 0 100-2 1 1 0 000 2zm1 1a1 1 0 100-2 1 1 0 000 2z" /></svg>', description: "Help grow the professional community and get rewarded. Refer other high-quality sellers and receive a commission reduction on your next jobs, a temporary profile boost, or an 'Ambassador' badge." }
            ]
        },
        mockBuyerRequest: "I need a deep clean for my 2-bedroom, 1-bathroom apartment (around 800 sq ft). The kitchen needs extra attention, especially the oven and behind the fridge. I also have a small balcony that needs sweeping. I have one cat. Looking for a service next Saturday.",
        competitors: {
            headers: ["Feature Category", "Hero24 Version 4", "TaskRabbit", "Angi", "Thumbtack", "Handy", "Urban Company"],
            rows: [ { category: "Booking Model", data: ["Hybrid: Instant Book, RFQ, Bidding, Custom", "Direct Hire, Instant Book", "Lead Gen, RFQ, Instant Book", "Bidding, RFQ, Direct Hire", "Instant Book", "Instant Book, RFQ"] }, { category: "Pricing Model", data: ["Fixed, Hourly, Quotes, Subscriptions", "Hourly Rates", "Upfront, Quotes", "Credit-based, Quotes", "Upfront Pricing", "Upfront Pricing, Quotes"] }, { category: "Trust & Safety", data: ["Multi-Layered: Vetting, Escrow, Guarantee", "Background Checks, Pledge", "Screening, Guarantee", "Verified Reviews, Checks", "Checks, Guarantee", "Verified Professionals"] }, { category: "Seller Tools", data: ["Analytics, AI Leads, Procurement, Training", "Calendar Mgmt, Chat", "Lead Mgmt, Ads", "Lead Budgeting, Profile", "Schedule Mgmt", "In-app Support"] }, { category: "AI/Personalization", data: ["Core Engine: Bot, Predictive Recs, Route Opt.", "Basic Recs", "Basic Matching", "AI Chatbot, Matching", "Limited", "Basic Matching"] }, ]
        },
        roadmap: [
            { id: 'phase1', phase: "The Trust Foundation", duration: "Months 1-2", icon: '🛡️', description: "Launch the core features that make Hero24 the safest platform on the market and provide a best-in-class user experience.", deliverables: ["Seller Verification Suite", "Secure Escrow & Credit System", "Hero24 Service Guarantee", "Core UI/UX Overhaul"] },
            { id: 'phase2', phase: "The Intelligent Marketplace", duration: "Months 2-4", icon: '💡', description: "Roll out the AI engine and advanced management tools to create a proactive, efficient, and data-driven marketplace.", deliverables: ["AI-Powered Booking & Quoting", "Advanced Project Management", "Rich Communication Suite", "Seller Analytics Dashboard"] },
            { id: 'phase3', phase: "The Community Ecosystem", duration: "Months 4-6", icon: '🚀', description: "Build features that drive long-term engagement, foster loyalty, and expand Hero24 beyond transactions into a true community.", deliverables: ["Loyalty & Referral Programs", "Community Hub & Tipping", "Seller Growth Tools (Procurement)", "Future Tech R&D"] }
        ],
        techStack: [ { name: "React Native", category: "Mobile Framework", description: "Build native iOS and Android apps from a single codebase for faster development and consistent UX." }, { name: "NestJS", category: "Backend Framework", description: "A progressive Node.js framework for building efficient, reliable, and scalable server-side applications." }, { name: "MongoDB", category: "Database", description: "A flexible, scalable NoSQL database ideal for the diverse data structures of a marketplace." }, { name: "AI / ML", category: "Intelligence Layer", description: "A core engine for personalization, matching, fraud detection, and operational optimization." }, { name: "WebSockets", category: "Real-Time Comms", description: "Powers real-time features like chat, status updates, and live location tracking." }, { name: "Microservices", category: "Future Architecture", description: "A potential transition to improve scalability, resilience, and development agility as the platform grows." }, { name: "WCAG Standards", category: "Accessibility", description: "A commitment to inclusivity, ensuring the app is usable by people with disabilities." }, { name: "CI/CD Pipeline", category: "DevOps", description: "Automated testing and deployment pipelines for faster, more reliable releases." }, ]
    };
    
    document.addEventListener('DOMContentLoaded', () => {
        const app = {
            init() {
                this.setupNavigation();
                this.renderBuyerFeatures();
                this.renderSellerFeatures();
                this.renderCompetitorTable();
                this.renderRoadmap();
                this.renderTechStack();
                this.initKpiCharts();
                this.initModal();
                
                const initialTab = window.location.hash.substring(1) || 'vision';
                this.showTab(initialTab);
            },
            
            setupNavigation() {
                const navLinks = document.querySelectorAll('.nav-link');
                navLinks.forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const tabId = e.target.getAttribute('data-tab');
                        this.showTab(tabId);
                        window.history.pushState(null, null, `#${tabId}`);
                    });
                });
            },
            
            showTab(tabId) {
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
                
                const activeContent = document.getElementById(tabId);
                const activeLink = document.querySelector(`.nav-link[data-tab="${tabId}"]`);
                
                if(activeContent) activeContent.classList.add('active');
                if(activeLink) activeLink.classList.add('active');
            },

            createFeatureCard(feature) {
                let geminiHtml = '';
                if (feature.gemini) {
                     if (feature.gemini.type === 'requestGenerator') {
                        geminiHtml = `
                            <div class="mt-4 pt-4 border-t border-stone-200">
                                <label for="request-input" class="block text-sm font-medium text-slate-700 mb-1">Describe your need:</label>
                                <input type="text" id="request-input" class="w-full border-stone-300 rounded-md shadow-sm text-sm" placeholder="e.g., Deep clean my kitchen">
                                <button data-gemini-type="${feature.gemini.type}" class="mt-2 w-full text-sm font-semibold text-[#ea4435] bg-red-50 hover:bg-red-100 rounded-md px-4 py-2 transition-all">✨ ${feature.gemini.label}</button>
                            </div>
                        `;
                    } else if (feature.gemini.type === 'quoteGenerator') {
                        geminiHtml = `
                             <div class="mt-4 pt-4 border-t border-stone-200">
                                <p class="text-sm font-medium text-slate-700 mb-1">Example Buyer Request:</p>
                                <p class="text-sm text-slate-500 bg-stone-50 p-2 rounded-md">"${AppData.mockBuyerRequest}"</p>
                                <button data-gemini-type="${feature.gemini.type}" class="mt-2 w-full text-sm font-semibold text-[#ea4435] bg-red-50 hover:bg-red-100 rounded-md px-4 py-2 transition-all">✨ ${feature.gemini.label}</button>
                            </div>
                        `;
                    }
                }

                return `
                    <div class="p-6 bg-white rounded-lg border border-stone-200 feature-card">
                        <div class="flex items-center">
                            <div class="p-2 bg-red-50 text-red-600 rounded-lg mr-4">
                                ${feature.icon}
                            </div>
                            <h3 class="text-lg font-bold text-slate-900">${feature.title}</h3>
                        </div>
                        <p class="mt-4 text-slate-600">${feature.description}</p>
                        ${geminiHtml}
                    </div>
                `;
            },

            renderBuyerFeatures() {
                const container = document.getElementById('buyerFeatures');
                container.innerHTML = AppData.features.buyer.map(this.createFeatureCard).join('');
            },

            renderSellerFeatures() {
                const container = document.getElementById('sellerFeatures');
                container.innerHTML = AppData.features.seller.map(this.createFeatureCard).join('');
            },

            renderCompetitorTable() {
                const table = document.getElementById('competitorTable');
                const headers = `<thead class="bg-stone-100 text-slate-900 font-semibold"><tr>${AppData.competitors.headers.map((h, i) => `<th class="p-3 ${i === 0 ? 'text-left' : 'text-center'}">${h}</th>`).join('')}</tr></thead>`;
                const body = `<tbody>${AppData.competitors.rows.map(row => `<tr class="border-b border-stone-200 hover:bg-stone-50"><td class="p-3 font-medium text-slate-700">${row.category}</td>${row.data.map((cell, i) => `<td class="p-3 text-center text-slate-600">${i === 0 ? `<span class="font-bold text-[#ea4435]">${cell}</span>` : cell}</td>`).join('')}</tr>`).join('')}</tbody>`;
                table.innerHTML = headers + body;
            },

            renderRoadmap() {
                const container = document.getElementById('roadmap-timeline');
                container.innerHTML = AppData.roadmap.map(item => `
                    <div class="relative timeline-item pb-8">
                        <div class="flex items-start">
                            <div class="text-3xl mr-4 mt-[-4px]">${item.icon}</div>
                            <div>
                                <h3 class="text-lg font-bold text-slate-900">${item.phase}</h3>
                                <p class="text-sm font-medium text-[#ea4435]">${item.duration}</p>
                                <p class="mt-2 text-slate-600">${item.description}</p>
                                <div class="mt-4 flex flex-wrap gap-2 items-center">
                                    ${item.deliverables.map(d => `<span class="text-xs font-medium bg-stone-100 text-slate-700 px-2 py-1 rounded-full">${d}</span>`).join('')}
                                     <button data-gemini-type="roadmapAnalyzer" data-phase-id="${item.id}" class="text-xs font-semibold text-[#ea4435] bg-red-50 hover:bg-red-100 rounded-full px-3 py-1 transition-all">✨ Analyze Phase Risks</button>
                                </div>
                            </div>
                        </div>
                    </div>
                `).join('');
            },

            renderTechStack() {
                const container = document.getElementById('techStack');
                container.innerHTML = AppData.techStack.map(tech => `<div class="bg-stone-100 p-4 rounded-lg text-center"><h4 class="font-bold text-slate-900">${tech.name}</h4><p class="text-sm text-[#ea4435] font-medium">${tech.category}</p><p class="text-xs text-slate-600 mt-2">${tech.description}</p></div>`).join('');
            },
            
            initKpiCharts() {
                this.createKpiChart('kpiChartTrust', AppData.kpis.trust, '#fbbf24');
                this.createKpiChart('kpiChartEngagement', AppData.kpis.engagement, '#38bdf8');
                this.createKpiChart('kpiChartGrowth', AppData.kpis.growth, '#818cf8');
            },

            createKpiChart(canvasId, data, color) {
                const ctx = document.getElementById(canvasId).getContext('2d');
                new Chart(ctx, {
                    type: 'bar', data: { labels: data.map(d => d.label), datasets: [{ label: 'Target Value', data: data.map(d => d.value), backgroundColor: color, borderColor: color, borderWidth: 1, borderRadius: 4, }] },
                    options: { responsive: true, maintainAspectRatio: false, indexAxis: 'y', plugins: { legend: { display: false }, tooltip: { callbacks: { label: (context) => `${context.dataset.label || ''}: ${context.parsed.x}${data[context.dataIndex].unit}` } } }, scales: { x: { beginAtZero: true, ticks: { callback: (value) => `${value}%` } }, y: { ticks: { autoSkip: false, callback: function(value) { const label = this.getLabelForValue(value); return label.length > 20 ? label.substring(0, 20) + '...' : label; } } } } }
                });
            },
            
            initModal() {
                const modal = document.getElementById('geminiModal');
                if (modal && modal._x_dataStack) {
                    modal._x_dataStack[0].show = false; 
                }

                document.body.addEventListener('click', async (e) => {
                    const button = e.target.closest('[data-gemini-type]');
                    if (!button) return;

                    const type = button.dataset.geminiType;
                    let prompt;
                    let title;

                    if (type === 'requestGenerator') {
                        const input = document.getElementById('request-input').value.trim();
                        if (!input) { 
                            this.showAlert('Input Required', 'Please enter a short description first.');
                            return; 
                        }
                        title = 'Generated Project Request';
                        prompt = `You are an expert home project planner helping a user write a job post. The user's initial request is: "${input}". Expand this into a detailed, clear, and comprehensive project description that a service provider can easily understand and quote. Include specific sections like 'Scope of Work', 'Key Areas', 'Special Instructions', and 'Desired Outcome'. Use Markdown for formatting.`;
                    } else if (type === 'quoteGenerator') {
                        title = 'Generated Smart Quote';
                        prompt = `You are an expert sales assistant for a home service professional. You have received the following service request from a potential customer: "${AppData.mockBuyerRequest}". Draft a professional, friendly, and persuasive quote to send to this customer. Start with a warm greeting, confirm understanding of the project, briefly outline the value you provide, provide a placeholder for the price (e.g., "[Estimated Price]"), and end with a clear call to action. Use Markdown for formatting.`;
                    } else if (type === 'roadmapAnalyzer') {
                        const phaseId = button.dataset.phaseId;
                        const phaseData = AppData.roadmap.find(p => p.id === phaseId);
                        title = `Risk Analysis for ${phaseData.phase}`;
                        prompt = `You are a senior project manager. Analyze the following software development phase and generate a brief risk analysis and mitigation plan. Phase details: "${JSON.stringify(phaseData)}". Identify 3-5 potential risks (e.g., technical, resource, scope creep) and suggest a concise mitigation strategy for each. Format the output clearly with headings for 'Potential Risks' and 'Mitigation Strategies'. Use Markdown for formatting.`;
                    }

                    if (prompt) {
                        this.showGeminiModal(title, type);
                        const result = await this.callGeminiApi(prompt);
                        this.updateGeminiModal(result, type);
                    }
                });
            },
            
            showGeminiModal(title, type) {
                const modal = document.getElementById('geminiModal');
                document.getElementById('geminiModalTitle').textContent = title;
                document.getElementById('geminiModalContent').innerHTML = '<div class="flex justify-center items-center h-48"><div class="loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12"></div></div>';
                modal.classList.remove('hidden');
                if (modal && modal._x_dataStack) {
                    modal._x_dataStack[0].show = true;
                    modal._x_dataStack[0].type = type;
                }
            },
            
            updateGeminiModal(content, type) {
                const parsedContent = this.parseMarkdown(content);
                let styledContent = '';

                switch(type) {
                    case 'quoteGenerator':
                        styledContent = `<div class="bg-white p-6 border border-gray-200 rounded-lg shadow-sm">${parsedContent}</div>`;
                        break;
                    case 'roadmapAnalyzer':
                        styledContent = `<div class="bg-stone-50 p-6 rounded-lg">${parsedContent}</div>`;
                        break;
                    default:
                        styledContent = `<div>${parsedContent}</div>`;
                }
                document.getElementById('geminiModalContent').innerHTML = styledContent;
            },

            parseMarkdown(text) {
                // Handle potential error messages first
                if (text.startsWith('<div')) return text;

                let html = text
                    .replace(/^### (.*$)/gim, '<h3>$1</h3>')
                    .replace(/^## (.*$)/gim, '<h2 class="text-xl font-semibold text-slate-800 mb-3 mt-4">$1</h2>')
                    .replace(/^# (.*$)/gim, '<h1 class="text-2xl font-bold text-slate-900 mb-4">$1</h1>')
                    .replace(/\*\*(.*)\*\*/gim, '<strong>$1</strong>')
                    .replace(/__(.*)__/gim, '<strong>$1</strong>')
                    .replace(/^\s*\n\*/gm, '<ul>\n*')
                    .replace(/^(\*.+)\s*\n([^\*])/gm, '$1\n</ul>\n\n$2')
                    .replace(/^\* (.*)/gm, '<li class="ml-4 mb-1">$1</li>')
                    .replace(/\n/g, '<br>');
                return html.trim();
            },

            async callGeminiApi(prompt) {
                const apiKey = "AIzaSyCjikg__pCqtfoaXkel8owtx0K7NKnchZQ";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                const payload = { contents: [{ role: "user", parts: [{ text: prompt }] }] };

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    if (!response.ok) {
                        const errorBody = await response.json();
                        throw new Error(`API call failed with status: ${response.status}. ${errorBody.error.message}`);
                    }
                    const result = await response.json();
                    
                    if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {
                        return result.candidates[0].content.parts[0].text;
                    }
                    return "No content generated. The response format might have changed.";
                } catch (error) {
                    console.error("Gemini API Error:", error);
                    return `<div class="bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md" role="alert">
                                <p class="font-bold">AI Generation Failed</p>
                                <p>An error occurred while contacting the AI. This is often due to an invalid or restricted API key.</p>
                                <p class="text-sm mt-2"><strong>Details:</strong> ${error.message}</p>
                            </div>`;
                }
            },

            showAlert(title, message) {
                if (!document.getElementById('custom-alert-style')) {
                    const style = document.createElement('style');
                    style.id = 'custom-alert-style';
                    style.innerHTML = `
                        .custom-alert-backdrop { position: fixed; inset: 0; background-color: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 100; }
                        .custom-alert-box { background-color: white; padding: 24px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 400px; width: 90%; text-align: center; }
                        .custom-alert-title { font-size: 1.25rem; font-weight: bold; margin-bottom: 1rem; }
                        .custom-alert-message { margin-bottom: 1.5rem; }
                        .custom-alert-button { background-color: #ea4435; color: white; padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer; }
                    `;
                    document.head.appendChild(style);
                }
                const backdrop = document.createElement('div');
                backdrop.className = 'custom-alert-backdrop';
                const box = document.createElement('div');
                box.className = 'custom-alert-box';
                const titleEl = document.createElement('div');
                titleEl.className = 'custom-alert-title';
                titleEl.textContent = title;
                const messageEl = document.createElement('div');
                messageEl.className = 'custom-alert-message';
                messageEl.textContent = message;
                const button = document.createElement('button');
                button.className = 'custom-alert-button';
                button.textContent = 'OK';
                button.onclick = () => { document.body.removeChild(backdrop); };
                box.appendChild(titleEl);
                box.appendChild(messageEl);
                box.appendChild(button);
                backdrop.appendChild(box);
                document.body.appendChild(backdrop);
            }
        };
        
        app.init();
    });
    </script>
</body>
</html>
